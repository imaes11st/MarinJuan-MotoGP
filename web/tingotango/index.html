<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>PIRINOLA!!</title>
    
    <script src="../resources/js/Winwheel.min.js" type="text/javascript"></script>
    <script src="../resources/js/TweenMax.min.js" type="text/javascript"></script>
    
</head>
<body>
    <input type="button" value="Girar" onclick="miRuleta.startAnimation();" />
    <input type="button" value="Atras" onclick="history.go(-1)" />
    <br />
    <br />
    <canvas id="canvas" height="400" width="400" ></canvas>
    <script>
        var miRuleta = new Winwheel({
            'numSegments': 6,
            'outerRadius': 170,
            'segments': [
                {'fillStyle': '#ff0080', 'text': 'Toma Todo'},
                {'fillStyle': '#0000ff', 'text': 'Toma Uno'},
                {'fillStyle': '#02ac66', 'text': 'Toda Dos'},
                {'fillStyle': '#ff0080', 'text': 'Todos ponen'},
                {'fillStyle': '#0000ff', 'text': 'Pon uno'},
                {'fillStyle': '#02ac66', 'text': 'Pon dos'}
            ],
            'animation':{
                'type': 'spinToStop', 
                'duration':5,
                'callbackFinished': 'Mensaje()',
                'callbackAfter': 'dibujarIndicador()'

            }
        });

        function Mensaje() {
var SegmentoSeleccionado = miRuleta.getIndicatedSegment();
alert("Elemento seleccionado:" + SegmentoSeleccionado.text + "!");
miRuleta.stopAnimation(false);
miRuleta.rotationAngle = 0;
miRuleta.draw();
dibujarIndicador();
}

        dibujarIndicador();
        function dibujarIndicador() {
var ctx = miRuleta.ctx;
ctx.strokeStyle = 'navy';
ctx.fillStyle = 'black';
ctx.lineWidth = 2;
ctx.beginPath();
ctx.moveTo(170, 0);
ctx.lineTo(230, 0);
ctx.lineTo(200, 40);
ctx.lineTo(171, 0);
ctx.stroke();
ctx.fill();
}



    </script>

</body>
</html>